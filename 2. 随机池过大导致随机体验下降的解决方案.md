# 随机池过大导致随机体验下降的解决方案

## 问题背景

长线运营的游戏中，普遍存在一个问题：随着时间推移，游戏内容娱乐来约多，随机池规模不断扩大，导致玩家的随机体验越来越差。

### 典型案例

以下几个游戏案例很好地说明了这一问题：

- **笔者所在项目《诸神皇冠》的符文系统**：随着版本更新，符文效果类别越来越多，玩家想要随机到心仪词条的难度不断增加，在未迭代前的随机方法下，几乎可以说是不可能事件。

- **《明日方舟》中坚寻访**：将大批老干员打包放入同一池子，虽然避免了限定池中出现老干员，但对于想要抽取特定老干员的玩家来说，抽到目标干员几乎成了不可能完成的任务。

- **《无畏契约》皮肤刷新**：随着皮肤数量增长，从商店的每日刷新中获得心仪皮肤的概率变得微乎其微。

## 核心问题分析

上述例子表明一个关键问题：**随机系统的样本空间不能放任其无限扩张**。

即使在池子中每个样本出现概率均等（即所谓"公平"）的情况下，对于单次具体的随机体验而言，仍然会造成重大的体验损伤。

## 解决方案：分而治之，打标签分组

针对这一问题，我提出了"**分而治之，打标签分组**"的解决方案。

### 方案详解

以《明日方舟》"中坚寻访"为例进行说明：

**现状分析：**

- 池子中共有41个六星角色
- 每期有2个六星UP角色轮换
- 抽取到六星时，50%概率是UP角色之一，50%概率是剩余39个角色
- 需要抽取中坚干员的玩家多数是新手，但新手玩家的需求和卡池轮动在时间窗口上是错配的。例如，某玩家在新手期间很想要干员”山“，但在我最需要的时候，卡池UP角色并不是他，等到轮换到的时候，该玩家已经度过新手期，不再需要该干员了。

**概率计算：**

- 如果玩家想要的角色未在当期UP中，获得心仪角色的概率为：
  $$\frac{1}{2} \times \frac{1}{39} ≈ 1.28\%$$
- 即使心仪角色的选择范围扩大到6个角色，概率也仅为7.7%，体验依然很差

**现有改进机制的局限性：**
"中坚甄选"的改进虽然允许玩家自选2个6星和3个5星来提升出货概率，但存在以下问题：

- 仅限时推出
- 推出期间通常有其他更需要抽取的池子，玩家不一定愿意投入资源
- 对于老玩家来说相对比较鸡肋

### 改进措施

**核心思路：** 将样本空间拆分成若干个子空间，让玩家在随机前先选择子空间，再进行抽取。

**具体实施：**
将池子中的41个角色按照一定标准进行维度分类：

- 干员职业
- 推出时间  
- 干员风格
- 其他合理分类标准

**示例计算（按职业分类）：**

- 分成8个职业小池子
- 每个池子平均5个角色(现有池子中近卫干员权重为其他职业的2倍，为简化计算，这里认为各职业干员数量相近)
- 玩家抽取前选择2个方向
- 保留现有的每期2角色UP机制

**效果提升：**

- 抽到单一目标角色的概率提升至：
  $$\frac{1}{2} \times \frac{1}{2} \times \frac{1}{5} = 5\%$$
  （是现有机制的近4倍）

- 如果玩家需求只是精确到某个职业，概率变为：
  $$\frac{1}{2} \times \frac{1}{2} = 25\%$$

## 方案优势

### 体验提升

即使未抽到心仪角色，但获得的角色与心仪角色定位相同，仍然具有实用价值，而不是抽到完全不需要的职业干员，导致出货价值约等于0。

### 合理性分析

虽然这种方法会**加速玩家获取角色**，但考虑到：

1. **定位合理性**："中坚寻访"本身就是将新老干员分隔，说明这些老干员已不再是主流，加速获取具有其合理性。

2. **目标用户特点**：需要抽取"中坚寻访"的玩家通常是新手，让他们更快获取曾经的强力角色：
   
   - 基本不会影响跟随版本进度的老玩家环境
   - 能让新手更快跟上版本进度
   - 促进新手加入最新角色的研究和消费

## 总结

通过"分而治之，打标签分组"的方案，可以有效解决随机池过大导致的体验下降问题，在提升玩家体验的同时，保持游戏的长期运营健康度。
