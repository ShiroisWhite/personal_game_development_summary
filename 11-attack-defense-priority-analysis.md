# 游戏数值设计：攻击力与防御力优先级分析

## 问题背景

假设我方参数：攻击力$A_1$，防御力$D_1$，生命$H_1$；敌方参数：攻击力$A_2$，防御力$D_2$，生命$H_2$。

本文旨在分析何种情况下优先攻+1，何种情况下优先防+1。

## 一、减法伤害公式分析

### 1.1 基础参数设定

我方单次承受伤害：$y_1 = A_2 - D_1$

我方生存时间：$t_1 = \frac{H_1}{A_2 - D_1}$

我方+1防后的承受伤害：$y_1' = A_2 - D_1 - 1$

我方+1防后的生存时间：$t_1' = \frac{H_1}{A_2 - D_1 - 1}$

敌方单次承受伤害：$y_2 = A_1 - D_2$

敌方生存时间：$t_2 = \frac{H_2}{A_1 - D_2}$

我方+1攻后敌方承受伤害：$y_2' = A_1 + 1 - D_2$

我方+1攻后敌方生存时间：$t_2' = \frac{H_2}{A_1 + 1 - D_2}$

### 1.2 效用计算

**我方+1防的效用**（即我方生存时间的提升）：

$$\Delta t_1 = \frac{H_1}{A_2 - D_1 - 1} - \frac{H_1}{A_2 - D_1}$$

即，我方可以多承受$\Delta t_1 \times (A_2 - D_1)$的伤害。

**我方+1攻的效用**（即敌方生存时间的减少）：

$$\Delta t_2 =  \frac{H_2}{A_1 - D_2}-\frac{H_2}{A_1 + 1 - D_2}$$

即，我方少受到$\Delta t_2 \times (A_2 - D_1)$的伤害。

### 1.3 优先级判断公式

令$\Delta t_1 \times (A_2 - D_1) > \Delta t_2 \times (A_2 - D_1)$，则：

$$\frac{H_1}{A_2 - D_1 - 1} - \frac{H_1}{A_2 - D_1} >  \frac{H_2}{A_1 - D_2}-\frac{H_2}{A_1 + 1 - D_2}$$

经过数学推导：

$$\frac{H_1(A_2 - D_1)-H_1(A_2 - D_1 - 1)}{(A_2 - D_1 - 1)(A_2 - D_1)}  > \frac{H_2(A_1 + 1 - D_2)-H_2(A_1 - D_2)}{(A_1 + 1 - D_2)(A_1 - D_2)}$$

$$\frac{H_1}{(A_2 - D_1 - 1)(A_2 - D_1)} > \frac{H_2}{(A_1 + 1 - D_2)(A_1 - D_2)}$$

最终得到判断条件：

$$\frac{H_1}{H_2}>\frac{(A_2-D_1-1)(A_2-D_1)}{(A_1+1-D_2)(A_1-D_2)}$$

### 1.4 决策边界

令$H_1 = f(H_2)=\frac{(A_2-D_1-1)(A_2-D_1)}{(A_1+1-D_2)(A_1-D_2)}H_2$，画图分析：

- **曲线上方区域**：+1防更优势
- **曲线下方区域**：+1攻更优势  
- **曲线上**：二者均势

## 二、实战案例：星际争霸2分析

### 2.1 单位参数

**神族狂热者**：
- 生命值：$H_1 = 100+50 = 150$
- 攻击力：$A_1 = 8 \times 2 = 16$ 
- 防御力：$D_1 = 1$

**虫族跳虫**：
- 生命值：$H_2 = 35$
- 攻击力：$A_2 = 5$
- 防御力：$D_2 = 0$

### 2.2 神族狂热者分析

计算关键比值：
$$\frac{H_1}{H_2} = \frac{150}{35} = \frac{30}{7}$$

$$\frac{(A_2-D_1-1)(A_2-D_1)}{(A_1+1-D_2)(A_1-D_2)}=\frac{(5-1-1)(5-1)}{(16+1-0)(16-0)}=\frac{12}{272}$$

由于$\frac{30}{7} > \frac{12}{272}$，**神族应该先升攻击**。

### 2.3 虫族跳虫分析

计算关键比值：
$$\frac{H_2}{H_1} = \frac{7}{30}$$

$$\frac{(A_1-D_2-1)(A_1-D_2)}{(A_2+1-D_1)(A_2-D_1)}=\frac{(16-0-1)(16-0)}{(5+1-1)(5-1)}=\frac{240}{20}=12$$

由于$\frac{7}{30} < 12$，**虫族应该先升防御**。

## 三、乘法伤害公式扩展

### 3.1 乘法公式定义

在乘法公式体系中，伤害计算为：
$$伤害 = 我方攻击力 \times \left(1 - \frac{敌方防御力}{敌方防御力 + 100}\right)$$

### 3.2 基础参数重新定义

我方单次承受伤害：$y_1 = A_2\times\left(1-\frac{D_1}{D_1+100}\right)$

我方生存时间：$t_1 = \frac{H_1}{A_2\times\left(1 - \frac{D_1}{D_1+100}\right)}$

我方防御力+1后：$t_1' = \frac{H_1}{A_2\times\left(1 - \frac{D_1+1}{D_1+1+100}\right)}$

敌方单次承受伤害：$y_2 = A_1\times\left(1 - \frac{D_2}{D_2+100}\right)$

敌方生存时间：$t_2 = \frac{H_2}{A_1 \times\left(1-\frac{D_2}{D_2+100}\right)}$

我方攻击力+1后：$t_2' = \frac{H_2}{(A_1+1)\times\left(1-\frac{D_2}{D_2+100}\right)}$

### 3.3 效用分析

**防御力+1效用**（我方生存时间增量）：
$$\Delta t_1 = t_1' - t_1 = \frac{H_1}{A_2\times\left(1 - \frac{D_1+1}{D_1+1+100}\right)}-\frac{H_1}{A_2\times\left(1 - \frac{D_1}{D_1+100}\right)}$$

我方可以多承受的伤害量：$\Delta t_1 \times A_2\times\left(1-\frac{D_1}{D_1+100}\right)$

**攻击力+1效用**（敌方少生存的时间）：
$$\Delta t_2 = t_2 - t_2' = \frac{H_2}{A_1 \times\left(1-\frac{D_2}{D_2+100}\right)}-\frac{H_2}{(A_1+1)\times\left(1-\frac{D_2}{D_2+100}\right)}$$

敌方可以少造成的伤害量：$\Delta t_2 \times A_2\times\left(1-\frac{D_1}{D_1+100}\right)$

### 3.4 乘法公式判断条件

令$\Delta t_1 > \Delta t_2$，则：

$$\frac{H_1}{A_2\times\left(1 - \frac{D_1+1}{D_1+1+100}\right)}-\frac{H_1}{A_2\times\left(1 - \frac{D_1}{D_1+100}\right)}>\frac{H_2}{A_1 \times\left(1-\frac{D_2}{D_2+100}\right)}-\frac{H_2}{(A_1+1)\times\left(1-\frac{D_2}{D_2+100}\right)}$$

最终化简为：

$$\frac{H_1}{H_2}>\frac{\frac{1}{A_1 \times\left(1-\frac{D_2}{D_2+100}\right)}-\frac{1}{(A_1+1)\times\left(1-\frac{D_2}{D_2+100}\right)}}{\frac{1}{A_2\times\left(1 - \frac{D_1+1}{D_1+1+100}\right)}-\frac{1}{A_2\times\left(1 - \frac{D_1}{D_1+100}\right)}}$$


